{
    "name": "insert_with_all",
    "do": {
        "action": "insert",
        "database": "test_db",
        "entries": [
            {
                "fields": [
                    {
                        "field": "fk",
                        "value": "0"
                    },
                    {
                        "field": "fv",
                        "value": "0"
                    }
                ],
                "tags": [
                    "t1",
                    "t2"
                ],
                "groups": [
                    {
                        "group": "g1",
                        "items": [
                            {
                                "fields": [
                                    {
                                        "field": "g1fk",
                                        "value": "0"
                                    },
                                    {
                                        "field": "g1fv",
                                        "value": "0"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "group": "g2",
                        "items": [
                            {
                                "fields": [
                                    {
                                        "field": "g2f1",
                                        "value": "0"
                                    },
                                    {
                                        "field": "g2f2",
                                        "value": "0"
                                    }
                                ]
                            },
                            {
                                "fields": [
                                    {
                                        "field": "g2f1",
                                        "value": "0"
                                    },
                                    {
                                        "field": "g2f2",
                                        "value": "0"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "files": [
                    {
                        "object_id": "{local}/f1.txt",
                        "name": "f1"
                    },
                    {
                        "object_id": "{local}/f2.txt",
                        "name": "f2",
                        "priority": "3",
                        "desc": "a"
                    }
                ]
            }
        ]
    },
    "check": [
        {
            "select": {
                "from": {
                    "type": "table_database",
                    "database": "test_db",
                    "table": "entry"
                }
            },
            "result": [
                {
                    "fk": "0",
                    "fv": "0"
                }
            ]
        },
        {
            "select": {
                "from": {
                    "type": "table_database",
                    "database": "test_db",
                    "table": "tag"
                }
            },
            "result": [
                {
                    "tag": "t1"
                },
                {
                    "tag": "t2"
                }
            ]
        },
        {
            "select": {
                "from": {
                    "type": "table_group",
                    "database": "test_db",
                    "group": "g1"
                }
            },
            "result": [
                {
                    "g1fk": "0",
                    "g1fv": "0",
                    "active": "1"
                }
            ]
        },
        {
            "select": {
                "from": {
                    "type": "table_group",
                    "database": "test_db",
                    "group": "g2"
                }
            },
            "result": [
                {
                    "g2f1": "0",
                    "g2f2": "0",
                    "active": "1"
                },
                {
                    "g2f1": "0",
                    "g2f2": "0",
                    "active": "1"
                }
            ]
        },
        {
            "select": {
                "from": {
                    "type": "table_database",
                    "database": "test_db",
                    "table": "file"
                }
            },
            "result": [
                {
                    "name": "f1",
                    "priority": "1",
                    "type": {
                        "type": "not",
                        "not": null
                    },
                    "active": "1",
                    "size": "4",
                    "crc": {
                        "type": "not",
                        "not": null
                    },
                    "file_version": "0"
                },
                {
                    "name": "f2",
                    "priority": "3",
                    "desc": "a"
                }
            ]
        }
    ]
}