{
    "name": "single_key_advanced",
    "desc": "single key advanced database tests",
    "tests": [
	    "update_fields",
        "update_tags_insert",
        "update_tags_delete",
        "update_files_insert",
        "update_files_insert_dupe",
        "update_files_replace",
        "update_files_replace_dispose",
        "update_files_set",
        "update_files_set_dispose",
        "update_files_delete",
        "update_files_delete_none",
        "update_files_restore",
        "update_files_restore_none",
        "update_files_dispose",
        "update_files_dispose_none",
        "update_files_update_file",
        "update_files_update_files",
        "update_files_update_name",
        "update_files_update_priority",
        "update_files_update_desc",
        "update_files_update_all",
        "update_gk_insert",
        "update_gk_insert_dupe",
        "update_gk_insert_update",
        "update_gk_replace",
        "update_gk_replace_dispose",
        "update_gk_set",
        "update_gk_set_dispose",
        "update_gk_delete",
        "update_gk_delete_none",
        "update_gk_restore",
        "update_gk_restore_none",
        "update_gk_dispose",
        "update_gk_dispose_none",
        "update_gk_update",
        "update_g_insert",
        "update_g_insert_dupe",
        "update_g_insert_update",
        "update_g_replace",
        "update_g_replace_dispose",
        "update_g_set",
        "update_g_set_dispose",
        "update_g_delete",
        "update_g_delete_none",
        "update_g_restore",
        "update_g_restore_none",
        "update_g_dispose",
        "update_g_dispose_none",
        "update_g_update",
        "insert_update",
        "insert_replace",
        "insert_replace_dispose",
        "insert_set",
        "insert_set_dispose",
        "replace",
        "replace_dispose",
        "set",
        "set_dispose"
	],
    "suite_start": {
        "action": "create",
        "create": "database",
		"team": "test",
        "database": {
            "name": "test_db",
            "label": "Test Database",
            "desc": "test database",
            "fields": [
                {
                    "name": "fk",
                    "type": "int(4)",
                    "key": true
                },
                {
                    "name": "fv",
                    "type": "int(4)"
                },
                {
                    "name": "fn1",
                    "type": "int(4)",
                    "nul": true
                },
                {
                    "name": "fn2",
                    "type": "int(4)",
                    "nul": true
                },
                {
                    "name": "fd1",
                    "type": "int(4)",
                    "nul": true,
                    "def": "7"
                },
                {
                    "name": "fd2",
                    "type": "int(4)",
                    "nul": true,
                    "def": "7"
                }
            ],
            "groups": [
                {
                    "name": "g1",
                    "desc": "group with key",
                    "fields": [
                        {
                            "name": "g1fk",
                            "type": "int(4)",
                            "key": true
                        },
                        {
                            "name": "g1fv",
                            "type": "int(4)"
                        },
                        {
                            "name": "g1fn1",
                            "type": "int(4)",
                            "nul": true
                        },
                        {
                            "name": "g1fn2",
                            "type": "int(4)",
                            "nul": true
                        },
                        {
                            "name": "g1fd1",
                            "type": "int(4)",
                            "nul": true,
                            "def": "7"
                        },
                        {
                            "name": "g1fd2",
                            "type": "int(4)",
                            "nul": true,
                            "def": "7"
                        }
                    ]
                },
                {
                    "name": "g2",
                    "desc": "group without key",
                    "fields": [
                        {
                            "name": "g2f1",
                            "type": "int(4)"
                        },
                        {
                            "name": "g2f2",
                            "type": "int(4)"
                        }
                    ]
                }
            ]
        }
    },
    "suite_end": {
        "action": "drop",
        "drop": "database",
        "database": "test_db"
    },
    "test_start": {
        "action": "insert",
        "database": "test_db",
        "entries": [
            {
                "fields": [
                    {
                        "field": "fk",
                        "value": "0"
                    },
                    {
                        "field": "fv",
                        "value": "0"
                    },
                    {
                        "field": "fn1",
                        "value": "0"
                    },
                    {
                        "field": "fn2",
                        "value": "0"
                    },
                    {
                        "field": "fd1",
                        "value": "0"
                    },
                    {
                        "field": "fd2",
                        "value": "0"
                    }
                ],
                "tags": [
                    "t1",
                    "t2"
                ],
                "files": [
                    {
                        "object_id": "{local}/f1.txt",
                        "name": "f1",
                        "priority": "3",
                        "desc": "a"
                    },
                    {
                        "object_id": "{local}/f2.txt",
                        "name": "f2",
                        "priority": "3",
                        "desc": "a"
                    }
                ],
                "groups": [
                    {
                        "group": "g1",
                        "items": [
                            [
                                {
                                    "field": "g1fk",
                                    "value": "0"
                                },
                                {
                                    "field": "g1fv",
                                    "value": "0"
                                },
                                {
                                    "field": "g1fn1",
                                    "value": "0"
                                },
                                {
                                    "field": "g1fn2",
                                    "value": "0"
                                },
                                {
                                    "field": "g1fd1",
                                    "value": "0"
                                },
                                {
                                    "field": "g1fd2",
                                    "value": "0"
                                }
                            ],
                            [
                                {
                                    "field": "g1fk",
                                    "value": "1"
                                },
                                {
                                    "field": "g1fv",
                                    "value": "1"
                                },
                                {
                                    "field": "g1fn1",
                                    "value": "1"
                                },
                                {
                                    "field": "g1fn2",
                                    "value": "1"
                                },
                                {
                                    "field": "g1fd1",
                                    "value": "1"
                                },
                                {
                                    "field": "g1fd2",
                                    "value": "1"
                                }
                            ]
                        ]
                    },
                    {
                        "group": "g2",
                        "items": [
                            [
                                {
                                    "field": "g2f1",
                                    "value": "0"
                                },
                                {
                                    "field": "g2f2",
                                    "value": "0"
                                }
                            ],
                            [
                                {
                                    "field": "g2f1",
                                    "value": "1"
                                },
                                {
                                    "field": "g2f2",
                                    "value": "1"
                                }
                            ]
                        ]
                    }
                ]
            },
			{
                "fields": [
                    {
                        "field": "fk",
                        "value": "1"
                    },
                    {
                        "field": "fv",
                        "value": "1"
                    },
                    {
                        "field": "fn1",
                        "value": "1"
                    },
                    {
                        "field": "fn2",
                        "value": "1"
                    },
                    {
                        "field": "fd1",
                        "value": "1"
                    },
                    {
                        "field": "fd2",
                        "value": "1"
                    }
                ]
            }
        ]
    },
    "test_end": {
        "action": "reset",
        "reset": "database",
        "database": "test_db"
    }
}